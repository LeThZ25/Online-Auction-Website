@model OnlineAuctionWebsite.Models.ViewModels.NewsIndexVM
@{
    ViewData["Title"] = "Tin tức";
}
<style>
    .news-hero {
        --g1: #153b5f;
        --g2: #1d5a8a;
        background: linear-gradient(135deg,var(--g1),var(--g2));
        color: #fff
    }

    .news-card .news-meta {
        font-size: .9rem;
        color: #6b7280
    }
</style>

<section class="news-hero py-4 py-lg-5">
    <div class="container">
        <nav aria-label="breadcrumb" class="mb-2">
            <ol class="breadcrumb m-0">
                <!-- EXPLICIT Home link -->
                <li class="breadcrumb-item">
                    <a class="link-light text-decoration-none"
                       asp-controller="Home" asp-action="Index">Trang chủ</a>
                </li>
                <li class="breadcrumb-item active" aria-current="page">Tin tức</li>
            </ol>
        </nav>

        <div class="d-lg-flex align-items-end justify-content-between">
            <div class="mb-3 mb-lg-0">
                <h1 class="display-6 fw-bold m-0">Tin tức &amp; thông báo</h1>
                <div class="opacity-75">Cập nhật hoạt động và hướng dẫn sử dụng.</div>
            </div>
            <form class="d-flex gap-2" method="get">
                <input type="search" class="form-control" name="q" value="@Model.Q" placeholder="Tìm bài viết..." />
                <button class="btn btn-light">Tìm</button>
            </form>
        </div>
    </div>
</section>

<div class="container my-5">
    @if (Model.Items?.Any() == true)
    {
        <div class="row g-4">
            @foreach (var n in Model.Items)
            {
                <div class="col-12 col-sm-6 col-lg-4">
                    <div class="card news-card h-100 shadow-sm border-0">
                        <div class="card-body d-flex flex-column">
                            <div class="news-meta mb-1">
                                <i class="fa-regular fa-calendar me-1"></i>@n.CreatedAt.ToLocalTime().ToString("dd/MM/yyyy HH:mm")
                            </div>
                            <h5 class="card-title">@n.Title</h5>
                            <p class="card-text text-muted">@n.Excerpt</p>
                            <div class="mt-auto">
                                <!-- EXPLICIT controller + action -->
                                <a class="btn btn-outline-primary w-100"
                                   asp-controller="NewsRead" asp-action="Article" asp-route-id="@n.Id">
                                    Xem chi tiết
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>

        @if (Model.TotalPages > 1)
        {
            <nav class="mt-4">
                <ul class="pagination justify-content-center">
                    <li class="page-item @(Model.Page <= 1 ? "disabled" : "")">
                        <a class="page-link"
                           asp-controller="NewsRead" asp-action="Index"
                           asp-route-q="@Model.Q" asp-route-page="@(Model.Page - 1)">«</a>
                    </li>
                    @for (int p = 1; p <= Model.TotalPages; p++)
                    {
                        <li class="page-item @(p == Model.Page ? "active" : "")">
                            <a class="page-link"
                               asp-controller="NewsRead" asp-action="Index"
                               asp-route-q="@Model.Q" asp-route-page="@p">@p</a>
                        </li>
                    }
                    <li class="page-item @(Model.Page >= Model.TotalPages ? "disabled" : "")">
                        <a class="page-link"
                           asp-controller="NewsRead" asp-action="Index"
                           asp-route-q="@Model.Q" asp-route-page="@(Model.Page + 1)">»</a>
                    </li>
                </ul>
            </nav>
        }
    }
    else
    {
        <div class="text-center text-muted py-5">Chưa có bài viết.</div>
    }
</div>